name: build zig

on:

  workflow_dispatch:
  push:

jobs:
  build-rootfs:
    runs-on: ubuntu-22.04
    permissions:
      contents: read
    steps:

    - name: "Checkout Repo"
      uses: actions/checkout@v4
      with: 
        repository: ziglang/zig
        fetch-depth: 2

    - name: Checkout build files
      uses: actions/checkout@v4
      with:
        repository: dpkg123/zig-debian
        fetch-depth: 2
        path: debian

    - name: Build
      run: sudo dpkg-buildpackage -b -us -uc
