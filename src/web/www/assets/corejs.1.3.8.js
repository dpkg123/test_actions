!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,(function(e){"use strict";const t=(e=e||{}).Base64,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=(e=>{let t={},n=0;for(const e of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")t[e]=n++;return t})(),o=(a=new TextEncoder).encode.bind(a);var a;const i=(e=>e.decode.bind(e))(new TextDecoder),c=String.fromCharCode,f=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=/g,""),s=(e,t)=>{let r="";for(let t=0,o=e.length;t<o;t+=3){const o=e[t],a=e[t+1],i=e[t+2],c=o<<16|a<<8|i;r+=n.charAt(c>>>18)+n.charAt(c>>>12&63)+(void 0!==a?n.charAt(c>>>6&63):"=")+(void 0!==i?n.charAt(63&c):"=")}return t?f(r):r},u=(e,t)=>{const n=s(o(e));return t?f(n):n},d=e=>{const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return t},l=e=>u(e,!0),h=e.btoa&&"function"==typeof e.btoa?e.btoa.bind(e):e=>{if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return s(d(e))},p=e=>i(d(e)),B=e=>{let t=e.length,n=t%4,o=(t>0?r[e.charAt(0)]<<18:0)|(t>1?r[e.charAt(1)]<<12:0)|(t>2?r[e.charAt(2)]<<6:0)|(t>3?r[e.charAt(3)]:0),a=[c(o>>>16),c(o>>>8&255),c(255&o)];return a.length-=[0,0,2,1][n],a.join("")},b=e.atob&&"function"==typeof e.atob?e.atob.bind(e):e=>String(e).replace(/[^A-Za-z0-9\+\/]/g,"").replace(/\S{1,4}/g,B),g=e=>String(e).replace(/[-_]/g,(e=>"-"==e?"+":"/")).replace(/[^A-Za-z0-9\+\/]/g,""),y=e=>{return t=g(e),p(b(t));var t},A=e=>Uint8Array.from(b(g(e)),(e=>e.charCodeAt(0)));e.Base64={VERSION:"3.0.2",atob:b,btoa:h,fromBase64:y,toBase64:u,utob:e=>{let t="";for(const n of o(e))t+=c(n);return t},encode:u,encodeURI:l,encodeURL:l,btou:p,decode:y,noConflict:()=>{let n=e.Base64;return e.Base64=t,n},fromUint8Array:s,toUint8Array:A};const m=e=>({value:e,enumerable:!1,writable:!0,configurable:!0});return e.Base64.extendString=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,m(t));e("fromBase64",(function(){return y(this)})),e("toBase64",(function(e){return u(this,e)})),e("toBase64URI",(function(){return u(this,!0)})),e("toBase64URL",(function(){return u(this,!0)})),e("toUint8Array",(function(){return A(this)}))},e.Base64.extendUint8Array=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,m(t));e("toBase64",(function(e){return s(this,e)})),e("toBase64URI",(function(){return s(this,!0)})),e("toBase64URL",(function(){return s(this,!0)}))},e.Base64.extendBuiltins=()=>{e.Base64.extendString(),e.Base64.extendUint8Array()},e.Meteor&&(Base64=e.Base64),"undefined"!=typeof module&&module.exports?module.exports.Base64=e.Base64:"function"==typeof define&&define.amd&&define([],(function(){return e.Base64})),{Base64:e.Base64}}));window.sapphireBootloader={$localServer:void 0,setLocalServer:function(e){window.sapphireBootloader.$localServer=e},initialize:function(e,i){if(!e)return void console.log("[Sappbire] Capabilities is invalid.",Date.now());if(window.sapphireBridge&&window.sapphireBridge.version==e.version)return void console.log("[Sapphire] Sapphire bridge already initialized.",Date.now());console.log("[Sapphire] Corejs initialized, platform = ",i,Date.now());const n=i&&"iOS"===i,o={},r={};function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=16*Math.random()|0;return("x"==e?i:3&i|8).toString(16)}))}const t={version:"1.3.7",subscribeCallback:function(e,i){o[e]?o[e].push(i):o[e]=[i]},subscribeObserver:function(e,i){r[e]?r[e].push(i):r[e]=[i]},unSubscribeObserver:function(e){delete r[e]}},s=function(e){let i=JSON.stringify(e);n?window.webkit.messageHandlers.send.postMessage(i):window.sapphireWebViewBridge&&window.sapphireWebViewBridge.send?window.sapphireWebViewBridge.send(i):console.log("[Sapphire] Sapphire runtime is not detected. Failed to send message: ",e)},d=function(e,i){i=Base64.decode(i),o[e]&&o[e].length>0&&(o[e].forEach((e=>{"function"==typeof e&&e(i)})),delete o[e]),r[e]&&r[e].length>0&&r[e].forEach((e=>{"function"==typeof e&&e(i)}))};window.sapphireBridge=t,n&&(window.sapphireWebViewBridge={}),window.sapphireWebViewBridge&&(window.sapphireWebViewBridge.$onDataReady=d);let l=e;l&&l.interfaces&&l.interfaces.length>0&&(!function(e,i){t&&e&&e.length>0&&(t.version=i,e.forEach((e=>{if(e){const i=e.name,n=e.arguments;t[i]=function(){const o={};if(n)for(let e=0;e<n.length;++e)n[e]&&n[e].name&&arguments.length>e&&arguments[e]&&(o[n[e].name]=arguments[e]);if("logEvent"===i&&window.edgeUtils&&window.edgeUtils.handleEventLog&&window.edgeUtils.handleEventLog(o),e.async){let e=a();return s({scenario:i,data:o,id:e}),e}s({scenario:i,data:o})}}})))}(l.interfaces,l.version),window.onSapphireBridgeReady&&window.onSapphireBridgeReady(),console.log("[Sapphire] Capabilities loaded, version = "+l.version,Date.now()))}};
