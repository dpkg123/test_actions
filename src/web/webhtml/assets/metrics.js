// Copyright (C) Microsoft Corporation. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
import{sendMessage as S}from"../common/message.js";import{MessageType as E,EventName as e}from"./constants.js";var _;!function(S){S.MSG_NORMAL_SEND="MsgNormalSend",S.MSG_VOICE_SEND="MsgVoiceSend",S.MSG_RESPONSE_START="MsgResponseStart",S.MSG_RESPONSE_END="MsgResponseEnd",S.MSG_ERROR_STATE="MsgErrorState",S.MSG_PENDING="MsgPending"}(_||(_={}));let M=0,N="";export function logEvent(S,E){if(S===e.MESSAGE_NORMAL_SEND)n(_.MSG_NORMAL_SEND),M=Date.now();else if(S===e.MESSAGE_VOICE_SEND)n(_.MSG_VOICE_SEND),M=Date.now();else if(S===e.CONVERSATION_STATUS_CHANGE)E?.pending?n(_.MSG_PENDING):M=0;else if(S===e.MESSAGE_RESPONSE_START){let S="0";M>0&&(S=""+(Date.now()-M)),M=0,n(_.MSG_RESPONSE_START,{duration:S})}else if(S===e.MESSAGE_RESPONSE_END)n(_.MSG_RESPONSE_END),M=0;else if(S===e.CHAT_ERROR_STATE){const S=E?.errorState;S&&S!==N&&(N=S,n(_.MSG_ERROR_STATE,{state:S})),M=0}}function n(e,_={}){S({type:E.METRICS,payload:{..._,name:e}})}